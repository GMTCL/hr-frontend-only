"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9243],{63:(e,t,a)=>{var r=a(7260);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},960:(e,t,a)=>{a.d(t,{Ay:()=>u,Gt:()=>o,Rz:()=>c,Wp:()=>y,aq:()=>n,ug:()=>l});let r=()=>localStorage.getItem("authToken"),s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a="".concat("https://hrbackoofice.mimshack-sourc.com/api").concat(e),s=(()=>{let e=r(),t={"Content-Type":"application/json",Accept:"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t})(),c=await fetch(a,{...t,headers:{...s,...t.headers}}),n=await c.json();if(!c.ok)throw Error(n.message||"HTTP error! status: ".concat(c.status));return{success:!0,data:n.data||n,message:n.message}}catch(t){return console.error("API request failed for ".concat(e,":"),t),{success:!1,message:t instanceof Error?t.message:"An unknown error occurred",errors:t}}},c={getAll:async()=>s("/employees"),getById:async e=>s("/employees/".concat(e)),create:async e=>s("/employees",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>s("/employees/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>s("/employees/".concat(e),{method:"DELETE"})},n={getAll:async()=>s("/leave-requests"),getById:async e=>s("/leave-requests/".concat(e)),create:async e=>s("/leave-requests",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>s("/leave-requests/".concat(e),{method:"PUT",body:JSON.stringify(t)}),approve:async e=>s("/leave-requests/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:"approved"})}),reject:async(e,t)=>s("/leave-requests/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:"rejected",reason:t})})},o={clockIn:async e=>s("/attendance/clock-in",{method:"POST",body:JSON.stringify({employee_id:e})}),clockOut:async e=>s("/attendance/clock-out",{method:"POST",body:JSON.stringify({employee_id:e})}),getAttendance:async(e,t)=>s(t?"/attendance?employee_id=".concat(e,"&date=").concat(t):"/attendance?employee_id=".concat(e)),getAttendanceReport:async(e,t)=>s("/attendance/summary?start_date=".concat(e,"&end_date=").concat(t))},l={getEmployeeReport:async()=>s("/reports/employees"),getAttendanceReport:async(e,t)=>s("/reports/attendance?start_date=".concat(e,"&end_date=").concat(t)),getPayrollReport:async e=>s("/reports/payroll?period=".concat(e)),getLeaveReport:async()=>s("/reports/leaves"),exportReport:async(e,t)=>s("/reports/".concat(e,"/export?format=").concat(t))},u={auth:{login:async e=>s("/auth/login",{method:"POST",body:JSON.stringify(e)}),logout:async()=>s("/auth/logout",{method:"POST"}),me:async()=>s("/auth/profile")},employee:c,department:{getAll:async()=>s("/departments"),getById:async e=>s("/departments/".concat(e)),create:async e=>s("/departments",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>s("/departments/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>s("/departments/".concat(e),{method:"DELETE"})},leave:n,attendance:o,payroll:{getAll:async()=>s("/payroll"),getById:async e=>s("/payroll/".concat(e)),process:async e=>s("/payroll/generate",{method:"POST",body:JSON.stringify({payroll_data:e})}),generateSlip:async(e,t)=>s("/payroll/export?period=".concat(encodeURIComponent(t)))},reports:l,performance:{getReviews:async e=>s(e?"/performance/reviews/".concat(e):"/performance/reviews"),createReview:async e=>s("/performance/reviews",{method:"POST",body:JSON.stringify(e)}),getGoals:async e=>s(e?"/performance/goals/".concat(e):"/performance/goals"),setGoal:async e=>s("/performance/goals",{method:"POST",body:JSON.stringify(e)})},training:{getCourses:async()=>s("/training/courses"),enrollEmployee:async(e,t)=>s("/training/enroll",{method:"POST",body:JSON.stringify({employee_id:e,course_id:t})}),getProgress:async e=>s("/training/progress/".concat(e)),markComplete:async(e,t)=>s("/training/complete",{method:"POST",body:JSON.stringify({employee_id:e,course_id:t})})},benefits:{getAll:async()=>s("/benefits"),enroll:async(e,t)=>s("/benefits/enroll",{method:"POST",body:JSON.stringify({employee_id:e,benefit_id:t})}),getEnrollments:async e=>s("/benefits/enrollments/".concat(e))},compliance:{getAudits:async()=>s("/compliance/audits"),createAudit:async e=>s("/compliance/audits",{method:"POST",body:JSON.stringify(e)}),getRegulations:async()=>s("/compliance/regulations"),trackCompliance:async e=>s("/compliance/track/".concat(e))},document:{getAll:async()=>s("/documents"),upload:async(e,t)=>{let a=new FormData;return a.append("file",e),a.append("category",t),s("/documents/upload",{method:"POST",body:a,headers:{Authorization:"Bearer ".concat(r())}})},download:async e=>s("/documents/".concat(e,"/download")),delete:async e=>s("/documents/".concat(e),{method:"DELETE"})},facialAttendance:{scanFace:async(e,t)=>s("/facial-attendance/scan",{method:"POST",body:JSON.stringify({image:e,employee_id:t})}),getAttendanceRecords:async e=>s("/facial-attendance/records?date=".concat(e)),getAttendanceSummary:async e=>s("/facial-attendance/summary?date=".concat(e)),getMissingAttendance:async e=>s("/facial-attendance/missing?date=".concat(e)),sendHRNotification:async e=>s("/facial-attendance/notify-hr",{method:"POST",body:JSON.stringify(e)}),recordPenalty:async e=>s("/facial-attendance/penalty",{method:"POST",body:JSON.stringify(e)}),getPenaltyHistory:async e=>s("/facial-attendance/penalty-history/".concat(e)),getSettings:async()=>s("/facial-attendance/settings"),updateSettings:async e=>s("/facial-attendance/settings",{method:"PUT",body:JSON.stringify(e)}),getTimeSlots:async()=>s("/facial-attendance/time-slots"),updateTimeSlots:async e=>s("/facial-attendance/time-slots",{method:"PUT",body:JSON.stringify({time_slots:e})}),exportReport:async(e,t,a)=>s("/facial-attendance/export?start_date=".concat(e,"&end_date=").concat(t,"&format=").concat(a))}},y={setAuthToken:e=>{localStorage.setItem("authToken",e)},removeAuthToken:()=>{localStorage.removeItem("authToken")},isAuthenticated:()=>null!==r(),formatError:e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e){if("message"in e&&"string"==typeof e.message)return e.message;if("errors"in e){let t=Object.values(e.errors)[0];return Array.isArray(t)?t[0]:String(t)}}return"An unexpected error occurred"}}},2328:(e,t,a)=>{a.d(t,{As:()=>c,TY:()=>o,nR:()=>n,nm:()=>u,sz:()=>l});var r=a(2115),s=a(960);function c(){let[e,t]=(0,r.useState)(!1),[a,c]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{if(s.Wp.isAuthenticated())try{let e=await s.Ay.auth.me();e.success&&e.data?(c(e.data),t(!0)):(s.Wp.removeAuthToken(),t(!1))}catch(e){s.Wp.removeAuthToken(),t(!1)}o(!1)})()},[]),{isAuthenticated:e,user:a,loading:n,login:async(e,a)=>{try{let r=await s.Ay.auth.login({email:e,password:a});if(r.success&&r.data)return s.Wp.setAuthToken(r.data.token),c(r.data.user),t(!0),{success:!0};return{success:!1,error:r.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}},logout:async()=>{try{await s.Ay.auth.logout()}catch(e){console.error("Logout error:",e)}finally{s.Wp.removeAuthToken(),c(null),t(!1)}}}}function n(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{c(!0),o(null);try{let e=await s.Ay.employee.getAll();e.success?t(e.data||[]):o(e.message||"Failed to fetch employees")}catch(e){o(s.Wp.formatError(e))}finally{c(!1)}},[]),u=async e=>{try{let t=await s.Ay.employee.create(e);if(t.success)return await l(),{success:!0,data:t.data};return{success:!1,error:t.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}},y=async(e,t)=>{try{let a=await s.Ay.employee.update(e,t);if(a.success)return await l(),{success:!0,data:a.data};return{success:!1,error:a.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}},i=async e=>{try{let t=await s.Ay.employee.delete(e);if(t.success)return await l(),{success:!0};return{success:!1,error:t.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}};return(0,r.useEffect)(()=>{l()},[l]),{employees:e,loading:a,error:n,fetchEmployees:l,createEmployee:u,updateEmployee:y,deleteEmployee:i}}function o(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{c(!0),o(null);try{let e=await s.Ay.department.getAll();e.success?t(e.data||[]):o(e.message||"Failed to fetch departments")}catch(e){o(s.Wp.formatError(e))}finally{c(!1)}},[]),u=async e=>{try{let t=await s.Ay.department.create(e);if(t.success)return await l(),{success:!0,data:t.data};return{success:!1,error:t.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}};return(0,r.useEffect)(()=>{l()},[l]),{departments:e,loading:a,error:n,fetchDepartments:l,createDepartment:u}}function l(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{c(!0),o(null);try{let e=await s.Ay.leave.getAll();e.success?t(e.data||[]):o(e.message||"Failed to fetch leaves")}catch(e){o(s.Wp.formatError(e))}finally{c(!1)}},[]),u=async e=>{try{let t=await s.Ay.leave.create(e);if(t.success)return await l(),{success:!0,data:t.data};return{success:!1,error:t.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}},y=async e=>{try{let t=await s.Ay.leave.approve(e);if(t.success)return await l(),{success:!0};return{success:!1,error:t.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}},i=async(e,t)=>{try{let a=await s.Ay.leave.reject(e,t);if(a.success)return await l(),{success:!0};return{success:!1,error:a.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}};return(0,r.useEffect)(()=>{l()},[l]),{leaves:e,loading:a,error:n,fetchLeaves:l,submitLeaveRequest:u,approveLeave:y,rejectLeave:i}}function u(){let[e,t]=(0,r.useState)(null),[a,c]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null);return{attendance:e,loading:a,error:n,clockIn:async e=>{try{c(!0);let t=await s.Ay.attendance.clockIn(e);if(t.success)return{success:!0};return{success:!1,error:t.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}finally{c(!1)}},clockOut:async e=>{try{c(!0);let t=await s.Ay.attendance.clockOut(e);if(t.success)return{success:!0};return{success:!1,error:t.message}}catch(e){return{success:!1,error:s.Wp.formatError(e)}}finally{c(!1)}},getAttendance:async(e,a)=>{try{c(!0);let r=await s.Ay.attendance.getAttendance(e,a);if(r.success)return t(r.data),{success:!0,data:r.data};return o(r.message||"Failed to fetch attendance"),{success:!1,error:r.message}}catch(t){let e=s.Wp.formatError(t);return o(e),{success:!1,error:e}}finally{c(!1)}}}}}}]);