(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6284],{4811:(e,s,t)=>{Promise.resolve().then(t.bind(t,7629))},7629:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),l=t(2115),r=t(2328),d=t(63);function n(){let{isAuthenticated:e,loading:s,user:t}=(0,r.As)(),n=(0,d.useRouter)(),[i,c]=(0,l.useState)(new Date().toISOString().split("T")[0]),[x,m]=(0,l.useState)([]),[o,h]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1),[u,y]=(0,l.useState)(!1),[N,j]=(0,l.useState)(null),[b,v]=(0,l.useState)(""),[f,w]=(0,l.useState)(0);(0,l.useEffect)(()=>{s||e||n.replace("./login")},[e,s,n]),(0,l.useEffect)(()=>{e&&k()},[i,e]);let k=async()=>{g(!0);try{m([{id:1,employeeId:1,employeeName:"John Doe",department:"IT",checkInTime:"08:30",checkOutTime:"17:30",status:"present",penaltyScore:0,notes:""},{id:2,employeeId:2,employeeName:"Jane Smith",department:"HR",checkInTime:"09:15",checkOutTime:"17:45",status:"late",penaltyScore:5,notes:"มาสาย 15 นาที"},{id:3,employeeId:3,employeeName:"Mike Johnson",department:"Finance",checkInTime:null,checkOutTime:null,status:"absent",penaltyScore:10,notes:"ไม่มาทำงาน"},{id:4,employeeId:4,employeeName:"Sarah Wilson",department:"Marketing",checkInTime:"08:45",checkOutTime:null,status:"partial",penaltyScore:3,notes:"เช็คชื่อออกไม่ครบ"}]),h({totalEmployees:4,present:1,absent:1,late:1,partial:1,attendanceRate:75})}catch(e){console.error("Error fetching attendance data:",e)}finally{g(!1)}};return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"จัดการการเข้างาน - HR"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"ระบบติดตามและจัดการการเข้างานของพนักงาน"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{type:"date",value:i,onChange:e=>c(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2"}),(0,a.jsx)("button",{onClick:()=>{alert("ส่งการแจ้งเตือนไปยังทีม HR แล้ว")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"ส่งแจ้งเตือน"}),(0,a.jsx)("button",{onClick:()=>{alert("ส่งออกรายงานการเข้างานแล้ว")},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:"ส่งออกรายงาน"})]})]})}),o&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)("div",{className:"text-2xl",children:"\uD83D\uDC65"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"พนักงานทั้งหมด"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o.totalEmployees})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)("div",{className:"text-2xl",children:"✅"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"มาทำงาน"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:o.present})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,a.jsx)("div",{className:"text-2xl",children:"❌"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"ขาดงาน"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:o.absent})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)("div",{className:"text-2xl",children:"⏰"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"มาสาย"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:o.late})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,a.jsx)("div",{className:"text-2xl",children:"\uD83D\uDCCA"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"อัตราการเข้างาน"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-indigo-600",children:[o.attendanceRate,"%"]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"รายการการเข้างาน"})}),p?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"กำลังโหลดข้อมูล..."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"พนักงาน"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"แผนก"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"เข้างาน"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ออกงาน"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"สถานะ"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"คะแนนโทษ"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"การดำเนินการ"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.employeeName}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.employeeId]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.department}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.checkInTime||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.checkOutTime||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("present"===e.status?"bg-green-100 text-green-800":"absent"===e.status?"bg-red-100 text-red-800":"late"===e.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:"present"===e.status?"มาทำงาน":"absent"===e.status?"ขาดงาน":"late"===e.status?"มาสาย":"ไม่ครบ"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsx)("span",{className:"font-semibold ".concat(e.penaltyScore>0?"text-red-600":"text-green-600"),children:e.penaltyScore})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>{j(e),y(!0)},className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"บันทึกโทษ"}),(0,a.jsx)("button",{className:"text-gray-600 hover:text-gray-900",children:"ดูรายละเอียด"})]})]},e.id))})]})})]}),u&&N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["บันทึกโทษ - ",N.employeeName]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เหตุผล"}),(0,a.jsx)("textarea",{value:b,onChange:e=>v(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:3,placeholder:"ระบุเหตุผลในการลงโทษ..."})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"คะแนนโทษ"}),(0,a.jsx)("input",{type:"number",value:f,onChange:e=>w(Number(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2",min:"0",max:"100"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"ยกเลิก"}),(0,a.jsx)("button",{onClick:()=>{N&&(console.log("Penalty submitted:",{employeeId:N.employeeId,reason:b,score:f}),y(!1),v(""),w(0),j(null))},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"บันทึกโทษ"})]})]})})})]})}):null}}},e=>{e.O(0,[9243,8441,1255,7358],()=>e(e.s=4811)),_N_E=e.O()}]);