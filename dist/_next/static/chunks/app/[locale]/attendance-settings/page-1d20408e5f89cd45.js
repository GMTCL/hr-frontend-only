(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7817],{7538:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(5155),a=s(2115),l=s(2328),i=s(63);function n(){let{isAuthenticated:e,loading:t}=(0,l.As)(),s=(0,i.useRouter)(),[n,d]=(0,a.useState)({companyName:"Mimshack Source Co., Ltd.",workingHours:{start:"08:00",end:"17:00"},breakTime:{start:"12:00",end:"13:00"},lateThreshold:15,gracePeriod:5,autoCheckout:!0,facialRecognitionEnabled:!0,notificationEnabled:!0,timeSlots:[{id:1,name:"ช่วงเช้า (เช็คชื่อเข้า)",startTime:"07:30",endTime:"09:00",isActive:!0,penaltyScore:0},{id:2,name:"ช่วงเย็น (เช็คชื่อออก)",startTime:"16:30",endTime:"18:00",isActive:!0,penaltyScore:0}]}),[c,o]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{t||e||s.replace("./login")},[e,t,s]);let g=async()=>{o(!0);try{await new Promise(e=>setTimeout(e,1e3)),alert("บันทึกการตั้งค่าเรียบร้อยแล้ว")}catch(e){console.error("Error saving settings:",e),alert("เกิดข้อผิดพลาดในการบันทึก")}finally{o(!1)}};return t?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ตั้งค่าระบบการเข้างาน"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"กำหนดการตั้งค่าสำหรับระบบสแกนใบหน้าและเช็คชื่อ"})]}),(0,r.jsx)("button",{onClick:g,disabled:c,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg transition-colors",children:c?"กำลังบันทึก...":"บันทึกการตั้งค่า"})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"การตั้งค่าพื้นฐาน"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ชื่อบริษัท"}),(0,r.jsx)("input",{type:"text",value:n.companyName,onChange:e=>d(t=>({...t,companyName:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เกณฑ์การมาสาย (นาที)"}),(0,r.jsx)("input",{type:"number",value:n.lateThreshold,onChange:e=>d(t=>({...t,lateThreshold:Number(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",min:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เวลาเข้างาน"}),(0,r.jsx)("input",{type:"time",value:n.workingHours.start,onChange:e=>d(t=>({...t,workingHours:{...t.workingHours,start:e.target.value}})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เวลาออกงาน"}),(0,r.jsx)("input",{type:"time",value:n.workingHours.end,onChange:e=>d(t=>({...t,workingHours:{...t.workingHours,end:e.target.value}})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เวลาพักกลางวัน (เริ่ม)"}),(0,r.jsx)("input",{type:"time",value:n.breakTime.start,onChange:e=>d(t=>({...t,breakTime:{...t.breakTime,start:e.target.value}})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เวลาพักกลางวัน (สิ้นสุด)"}),(0,r.jsx)("input",{type:"time",value:n.breakTime.end,onChange:e=>d(t=>({...t,breakTime:{...t.breakTime,end:e.target.value}})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"ฟีเจอร์ระบบ"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"ระบบสแกนใบหน้า"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"เปิดใช้งานการสแกนใบหน้าเพื่อเช็คชื่อ"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:n.facialRecognitionEnabled,onChange:e=>d(t=>({...t,facialRecognitionEnabled:e.target.checked})),className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"การแจ้งเตือนอัตโนมัติ"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"ส่งการแจ้งเตือนไปยัง HR เมื่อมีการขาดงานหรือมาสาย"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:n.notificationEnabled,onChange:e=>d(t=>({...t,notificationEnabled:e.target.checked})),className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"เช็คชื่อออกอัตโนมัติ"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"เช็คชื่อออกอัตโนมัติเมื่อพนักงานไม่เช็คชื่อออกตามเวลา"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:n.autoCheckout,onChange:e=>d(t=>({...t,autoCheckout:e.target.checked})),className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"ช่วงเวลาสแกนใบหน้า"}),(0,r.jsx)("button",{onClick:()=>{h({id:Date.now(),name:"",startTime:"08:00",endTime:"17:00",isActive:!0,penaltyScore:0}),x(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:"เพิ่มช่วงเวลา"})]}),(0,r.jsx)("div",{className:"space-y-3",children:n.timeSlots.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.startTime," - ",e.endTime,e.penaltyScore>0&&(0,r.jsxs)("span",{className:"ml-2 text-red-600",children:["(โทษ: ",e.penaltyScore," คะแนน)"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?"เปิดใช้งาน":"ปิดใช้งาน"}),(0,r.jsx)("button",{onClick:()=>{h({...e}),x(!0)},className:"text-indigo-600 hover:text-indigo-900 text-sm",children:"แก้ไข"}),(0,r.jsx)("button",{onClick:()=>{var t;return t=e.id,void d(e=>({...e,timeSlots:e.timeSlots.filter(e=>e.id!==t)}))},className:"text-red-600 hover:text-red-900 text-sm",children:"ลบ"})]})]},e.id))})]})]}),m&&u&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:u.id&&n.timeSlots.find(e=>e.id===u.id)?"แก้ไขช่วงเวลา":"เพิ่มช่วงเวลาใหม่"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ชื่อช่วงเวลา"}),(0,r.jsx)("input",{type:"text",value:u.name,onChange:e=>h(t=>t?{...t,name:e.target.value}:null),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"เช่น ช่วงเช้า (เช็คชื่อเข้า)"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เวลาเริ่ม"}),(0,r.jsx)("input",{type:"time",value:u.startTime,onChange:e=>h(t=>t?{...t,startTime:e.target.value}:null),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เวลาสิ้นสุด"}),(0,r.jsx)("input",{type:"time",value:u.endTime,onChange:e=>h(t=>t?{...t,endTime:e.target.value}:null),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"คะแนนโทษ (ถ้าสแกนนอกช่วงเวลา)"}),(0,r.jsx)("input",{type:"number",value:u.penaltyScore,onChange:e=>h(t=>t?{...t,penaltyScore:Number(e.target.value)}:null),className:"w-full border border-gray-300 rounded-lg px-3 py-2",min:"0"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:u.isActive,onChange:e=>h(t=>t?{...t,isActive:e.target.checked}:null),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,r.jsx)("label",{className:"ml-2 block text-sm text-gray-900",children:"เปิดใช้งาน"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"ยกเลิก"}),(0,r.jsx)("button",{onClick:()=>{u&&(u.id&&n.timeSlots.find(e=>e.id===u.id)?d(e=>({...e,timeSlots:e.timeSlots.map(e=>e.id===u.id?u:e)})):d(e=>({...e,timeSlots:[...e.timeSlots,u]}))),x(!1),h(null)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"บันทึก"})]})]})})})]})}):null}},7818:(e,t,s)=>{Promise.resolve().then(s.bind(s,7538))}},e=>{e.O(0,[9243,8441,1255,7358],()=>e(e.s=7818)),_N_E=e.O()}]);