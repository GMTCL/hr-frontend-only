"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5750],{63:(e,t,a)=>{var n=a(7260);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})},854:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(2115);function o(){let[e,t]=(0,n.useState)({loading:!1,error:null,user:null,isAuthenticated:!1}),a=(0,n.useCallback)(async(e,a)=>{t(e=>({...e,loading:!0,error:null}));try{if(await new Promise(e=>setTimeout(e,1e3)),"admin@hr.com"!==e||"password"!==a)return t(e=>({...e,loading:!1,error:"อีเมลหรือรหัสผ่านไม่ถูกต้อง"})),{success:!1,error:"อีเมลหรือรหัสผ่านไม่ถูกต้อง"};{let a={id:1,email:e,name:"HR Admin",role:"admin"};return t({loading:!1,error:null,user:a,isAuthenticated:!0}),{success:!0,user:a}}}catch(a){let e="เกิดข้อผิดพลาดในการเข้าสู่ระบบ";return t(t=>({...t,loading:!1,error:e})),{success:!1,error:e}}},[]),o=(0,n.useCallback)(()=>{t({loading:!1,error:null,user:null,isAuthenticated:!1})},[]),c=(0,n.useCallback)(()=>{t(e=>({...e,error:null}))},[]);return{...e,login:a,logout:o,clearError:c}}},960:(e,t,a)=>{a.d(t,{Ay:()=>i,Gt:()=>r,Rz:()=>c,Wp:()=>d,aq:()=>s,ug:()=>l});let n=()=>localStorage.getItem("authToken"),o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a="".concat("https://hrbackoofice.mimshack-sourc.com/api").concat(e),o=(()=>{let e=n(),t={"Content-Type":"application/json",Accept:"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t})(),c=await fetch(a,{...t,headers:{...o,...t.headers}}),s=await c.json();if(!c.ok)throw Error(s.message||"HTTP error! status: ".concat(c.status));return{success:!0,data:s.data||s,message:s.message}}catch(t){return console.error("API request failed for ".concat(e,":"),t),{success:!1,message:t instanceof Error?t.message:"An unknown error occurred",errors:t}}},c={getAll:async()=>o("/employees"),getById:async e=>o("/employees/".concat(e)),create:async e=>o("/employees",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>o("/employees/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>o("/employees/".concat(e),{method:"DELETE"})},s={getAll:async()=>o("/leave-requests"),getById:async e=>o("/leave-requests/".concat(e)),create:async e=>o("/leave-requests",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>o("/leave-requests/".concat(e),{method:"PUT",body:JSON.stringify(t)}),approve:async e=>o("/leave-requests/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:"approved"})}),reject:async(e,t)=>o("/leave-requests/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:"rejected",reason:t})})},r={clockIn:async e=>o("/attendance/clock-in",{method:"POST",body:JSON.stringify({employee_id:e})}),clockOut:async e=>o("/attendance/clock-out",{method:"POST",body:JSON.stringify({employee_id:e})}),getAttendance:async(e,t)=>o(t?"/attendance?employee_id=".concat(e,"&date=").concat(t):"/attendance?employee_id=".concat(e)),getAttendanceReport:async(e,t)=>o("/attendance/summary?start_date=".concat(e,"&end_date=").concat(t))},l={getEmployeeReport:async()=>o("/reports/employees"),getAttendanceReport:async(e,t)=>o("/reports/attendance?start_date=".concat(e,"&end_date=").concat(t)),getPayrollReport:async e=>o("/reports/payroll?period=".concat(e)),getLeaveReport:async()=>o("/reports/leaves"),exportReport:async(e,t)=>o("/reports/".concat(e,"/export?format=").concat(t))},i={auth:{login:async e=>o("/auth/login",{method:"POST",body:JSON.stringify(e)}),logout:async()=>o("/auth/logout",{method:"POST"}),me:async()=>o("/auth/profile")},employee:c,department:{getAll:async()=>o("/departments"),getById:async e=>o("/departments/".concat(e)),create:async e=>o("/departments",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>o("/departments/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>o("/departments/".concat(e),{method:"DELETE"})},leave:s,attendance:r,payroll:{getAll:async()=>o("/payroll"),getById:async e=>o("/payroll/".concat(e)),process:async e=>o("/payroll/generate",{method:"POST",body:JSON.stringify({payroll_data:e})}),generateSlip:async(e,t)=>o("/payroll/export?period=".concat(encodeURIComponent(t)))},reports:l,performance:{getReviews:async e=>o(e?"/performance/reviews/".concat(e):"/performance/reviews"),createReview:async e=>o("/performance/reviews",{method:"POST",body:JSON.stringify(e)}),getGoals:async e=>o(e?"/performance/goals/".concat(e):"/performance/goals"),setGoal:async e=>o("/performance/goals",{method:"POST",body:JSON.stringify(e)})},training:{getCourses:async()=>o("/training/courses"),enrollEmployee:async(e,t)=>o("/training/enroll",{method:"POST",body:JSON.stringify({employee_id:e,course_id:t})}),getProgress:async e=>o("/training/progress/".concat(e)),markComplete:async(e,t)=>o("/training/complete",{method:"POST",body:JSON.stringify({employee_id:e,course_id:t})})},benefits:{getAll:async()=>o("/benefits"),enroll:async(e,t)=>o("/benefits/enroll",{method:"POST",body:JSON.stringify({employee_id:e,benefit_id:t})}),getEnrollments:async e=>o("/benefits/enrollments/".concat(e))},compliance:{getAudits:async()=>o("/compliance/audits"),createAudit:async e=>o("/compliance/audits",{method:"POST",body:JSON.stringify(e)}),getRegulations:async()=>o("/compliance/regulations"),trackCompliance:async e=>o("/compliance/track/".concat(e))},document:{getAll:async()=>o("/documents"),upload:async(e,t)=>{let a=new FormData;return a.append("file",e),a.append("category",t),o("/documents/upload",{method:"POST",body:a,headers:{Authorization:"Bearer ".concat(n())}})},download:async e=>o("/documents/".concat(e,"/download")),delete:async e=>o("/documents/".concat(e),{method:"DELETE"})},facialAttendance:{scanFace:async(e,t)=>o("/facial-attendance/scan",{method:"POST",body:JSON.stringify({image:e,employee_id:t})}),getAttendanceRecords:async e=>o("/facial-attendance/records?date=".concat(e)),getAttendanceSummary:async e=>o("/facial-attendance/summary?date=".concat(e)),getMissingAttendance:async e=>o("/facial-attendance/missing?date=".concat(e)),sendHRNotification:async e=>o("/facial-attendance/notify-hr",{method:"POST",body:JSON.stringify(e)}),recordPenalty:async e=>o("/facial-attendance/penalty",{method:"POST",body:JSON.stringify(e)}),getPenaltyHistory:async e=>o("/facial-attendance/penalty-history/".concat(e)),getSettings:async()=>o("/facial-attendance/settings"),updateSettings:async e=>o("/facial-attendance/settings",{method:"PUT",body:JSON.stringify(e)}),getTimeSlots:async()=>o("/facial-attendance/time-slots"),updateTimeSlots:async e=>o("/facial-attendance/time-slots",{method:"PUT",body:JSON.stringify({time_slots:e})}),exportReport:async(e,t,a)=>o("/facial-attendance/export?start_date=".concat(e,"&end_date=").concat(t,"&format=").concat(a))}},d={setAuthToken:e=>{localStorage.setItem("authToken",e)},removeAuthToken:()=>{localStorage.removeItem("authToken")},isAuthenticated:()=>null!==n(),formatError:e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e){if("message"in e&&"string"==typeof e.message)return e.message;if("errors"in e){let t=Object.values(e.errors)[0];return Array.isArray(t)?t[0]:String(t)}}return"An unexpected error occurred"}}},3492:(e,t,a)=>{a.d(t,{M:()=>c});var n=a(2115),o=a(960);let c=()=>{let[e,t]=(0,n.useState)({stats:null,recentActivities:[],loading:!1,error:null}),a=(0,n.useCallback)(async()=>{try{var e,a,n,c,s,r,l,i,d;t(e=>({...e,loading:!0,error:null}));let[y,m,u,p]=await Promise.all([o.ug.getEmployeeReport(),o.ug.getAttendanceReport(new Date().toISOString().split("T")[0],new Date().toISOString().split("T")[0]),o.ug.getLeaveReport(),o.ug.getPayrollReport(new Date().toISOString().slice(0,7))]),g={totalEmployees:y.success&&(null==(e=y.data)?void 0:e.total)||0,presentToday:m.success&&(null==(a=m.data)?void 0:a.present)||0,pendingLeaves:u.success&&(null==(n=u.data)?void 0:n.pending)||0,monthlyPayroll:p.success&&(null==(c=p.data)?void 0:c.total)||0,attendanceRate:m.success&&(null==(s=m.data)?void 0:s.rate)||0,leaveRate:u.success&&(null==(r=u.data)?void 0:r.rate)||0},f=[...u.success&&(null==(l=u.data)?void 0:l.recent)?u.data.recent.map((e,t)=>({id:t+1,type:"leave",message:"".concat(e.employee_name," submitted a ").concat(e.leave_type," request"),time:e.created_at,employee_name:e.employee_name})):[],...m.success&&(null==(i=m.data)?void 0:i.recent)?m.data.recent.map((e,t)=>({id:t+100,type:"attendance",message:"".concat(e.employee_name," was ").concat("late"===e.status?"late":"present"),time:e.check_in_time,employee_name:e.employee_name})):[],...y.success&&(null==(d=y.data)?void 0:d.recent)?y.data.recent.map((e,t)=>({id:t+200,type:"employee",message:"New employee: ".concat(e.name," added to system"),time:e.created_at,employee_name:e.name})):[]].sort((e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime()).slice(0,10);t({stats:g,recentActivities:f,loading:!1,error:null})}catch(e){t(t=>({...t,loading:!1,error:e instanceof Error?e.message:"Failed to fetch dashboard data"}))}},[]),c=(0,n.useCallback)(()=>{a()},[a]),s=(0,n.useCallback)(()=>{t(e=>({...e,error:null}))},[]);return(0,n.useEffect)(()=>{a()},[a]),{...e,refreshData:c,clearError:s}}}}]);